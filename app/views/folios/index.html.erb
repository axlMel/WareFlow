<div class="min-h-screen flex flex-col lg:flex-row gap-6 p-4 lg:p-6">
  <!-- sidebar de filtros -->
  <div class="w-full lg:w-1/4 space-y-4">
    <div class="bg-white p-4 rounded-2xl shadow space-y-4">
      <h1 class="text-2xl font-bold text-gray-800">Filtrar folios</h1>

      <%= form_with url: folios_path, method: :get, data:{ controller: "debounce-search", turbo_frame: "folios_table" }, class: "space-y-4" do |form| %>

        <!-- Busqueda -->
        <div>
          <%= form.label :q, "Busqueda", class: "block text-sm font-medium text-gray-700" %>
          <%= form.text_field :q, value: params[:q], placeholder: "Cliente usuario o folio", data: { debounce_search_target: "input", action: "input->debounce-search#search" }, class: "w-full border border-gray-300 rounded-xl px-3 py-2 text-sm" %>
        </div>

        <!-- Estado -->
        <div>
          <%= form.label :status, "Estado de folio", class: "block text-sm font-medium text-gray-700" %>
          <%= form.select :status, options_for_select([['Creado', :crafted], ['Asignado', :assigned], ['Finalizado', :delivered]], params[:status]), { include_blank: true }, class: "w-full border border-gray-300 rounded-lg px-3 py-2 text-sm" %>
        </div>

        <!-- Fechas -->
        <div class="grid grid-cols-2 gap-3">
          <div>
            <%= form.label :from, "Desde", class: "block text-sm text-gray-600" %>
            <%= form.date_field :from, value: params[:from], class:"w-full border border-gray-300 rounded-xl px-2 py-1 text-sm" %>
          </div>
          <div>
            <%= form.label :to, "Hasta", class: "block text-sm text-gray-600" %>
            <%= form.date_field :to, value: params[:to], class: "w-full border border-gray-300 rounded-xl px-2 py-1 text-sm" %>
          </div>
        </div>

        <div class="pt-2">
          <%= form.submit 'Filtrar', class: "w-full bg-sky-600 hover:bg-sky-700 text-white font-semibold px-4 py-2 rounded-xl transition" %>
        </div>
      <% end %>

      <div class="pt-4">
        <%= link_to 'Nuevo folio', new_folio_path, data: { turbo_frame: "modal" }, class: "block w-full text-center bg-blue-600 hover:bg-blue-700 text-white font-semibold px-4 py-2 rounded-xl transition" %>
      </div>
    </div>
  </div>

  <!-- Panel derecho: tabla de folios -->
  <div class="w-full lg:w-3/4 space-y-4">
    <div class="bg-white p-4 rounded-2xl shadow">
      <h2 class="text-xl font-semibold mb-4">Lista de folios</h2>

      <div class="overflow-x-auto">
        <table class="min-w-full text-sm text-left border-collapse">
          <thead class="text-xs text-gray-500 uppercase border-b">
            <tr>
              <th class="px-4 py-2">Fecha</th>
              <th class="px-4 py-2">Folio</th>
              <th class="px-4 py-2">Cliente</th>
              <th class="px-4 py-2">Usuario</th>
              <th class="px-4 py-2">Estado</th>
              <th class="px-4 py-2">Acciones</th>
            </tr>
          </thead>
          <tbody class="divide-y divide-gray-200">
            <% @folios.each do |folio| %>
              <tr class="hover:bg-gray-50">
                <td class="px-4 py-2"><%= folio.created_at.strftime("%d/%m/%Y") %></td>
                <td class="px-4 py-2 font-medium"><%= folio.id %></td>
                <td class="px-4 py-2"><%= folio.client %></td>
                <td class="px-4 py-2"><%= folio.user&.username || "No asignado" %></td>
                <td class="px-4 py-2 capitalize"><%= folio.status %></td>
                <td class="px-4 py-2 flex gap-2">
                  <%= link_to 'Ver', folio_path(folio), class: "text-blue-600 hover:underline", data: { turbo_frame: "modal" } %>
                  <%= link_to 'Editar', edit_folio_path(folio), class: "text-yellow-600 hover:underline", data: { turbo_frame: "modal" } %>
                  <%= link_to 'Eliminar', folio_path(folio), method: :delete, data: { confirm: '¿Estás seguro?' }, class: "text-red-600 hover:underline" %>
                </td>
              </tr>
            <% end %>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>

