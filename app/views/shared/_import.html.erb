<%= turbo_frame_tag "modal" do %>
  <div class="p-6" data-controller="modal">
    <%= render "shared/modal" do %>

      <!-- TÃ­tulo -->
      <h1 class="text-2xl font-bold text-gray-800 border-b mb-2">
        Importar Excel
      </h1>

      <!-- Descargar archivo base -->
      <p class="text-sm text-gray-500 mb-1 text-right">
        Â¿No tienes el formato?
        <%= link_to "Descargar archivo base",
          download_base_folios_path,
          data: { turbo: false },
          class: "text-blue-600 font-medium hover:underline" %>
      </p>


      <!-- Formulario -->
      <%= form_with url: import_folios_path,
                    multipart: true,
                    data: { turbo_frame: "_top", controller: "upload" },
                    class: "space-y-5" do |f| %>

        <!-- Dropzone -->
        <label
          class="flex flex-col items-center justify-center w-full
                 border-2 border-dashed border-gray-300
                 rounded-xl p-10
                 cursor-pointer
                 bg-gray-50 hover:bg-gray-100
                 transition"
          data-action="dragover->upload#dragOver
                        drop->upload#drop
                      "
        >
          <!-- Icono -->
          <div class="mb-3 text-gray-400">
            <svg xmlns="http://www.w3.org/2000/svg"
                 class="h-12 w-12"
                 fill="none"
                 viewBox="0 0 24 24"
                 stroke="currentColor">
              <path stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="1.5"
                    d="M12 4v16m8-8H4" />
            </svg>
          </div>

          <!-- Texto -->
          <p class="text-sm text-gray-500">
            Arrastra y suelta o
            <span class="text-blue-600 font-medium underline">
              busca
            </span>
            tu archivo
          </p>

          <!-- Input -->
          <%= f.file_field :file,
                accept: ".xlsx,.xlsm",
                class: "hidden",
                data: { upload_target: "input", action: "change->upload#preview" } %>
        </label>

        <!-- Preview archivo (mock visual) -->
        <div
          class="flex items-center gap-4 p-4 border rounded-lg"
          data-upload-target="preview"
          hidden
        >
          <!-- Icono archivo -->
          <div class="text-gray-500">
            ðŸ“„
          </div>

          <!-- Info -->
          <div class="flex-1">
            <p class="text-sm font-medium text-gray-700"
               data-upload-target="filename">
            </p>

            <!-- Barra -->
            <div class="w-full bg-gray-200 rounded-full h-2 mt-2">
              <div class="bg-blue-500 h-2 rounded-full w-3/3"></div>
            </div>
          </div>
          <!-- % -->
          <span class="text-sm text-blue-600 font-medium">
            100%
          </span>

          <!-- Eliminar -->
          <button type="button"
                  data-action="click->upload#remove"
                  class="text-gray-400 hover:text-red-500 text-sm">
            âœ•
          </button>
        </div>

        <!-- BotÃ³n -->
        <%= f.submit "Subir",
            class: "w-full bg-blue-600 hover:bg-blue-700
                  text-white font-semibold py-3 rounded-full
                  transition" %>
      <% end %>
    <% end %>
  </div>
<% end %>