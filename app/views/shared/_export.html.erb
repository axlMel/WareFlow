<%= turbo_frame_tag "modal" do %>
  <div class="p-6" data-controller="modal">
    <%= render "shared/modal" do %>

      <!-- TÃ­tulo -->
      <h1 class="text-2xl font-bold text-gray-800 border-b mb-2">
        Exportar Datos
      </h1>
      <p class="text-sm text-gray-500 mt-1 pb-2">
        Elige el alcance y el formato del archivo
      </p>

      <%= form_with url: download_folios_path, method: :get, data: { turbo: false }, class: "space-y-6" do %>
        <div>
          <p class="text-sm font-semibold text-gray-700 mb-2">Alcance</p>
          <div class="grid grid-cols-2 gap-3">
            <label class="cursor-pointer">
              <%= radio_button_tag :scope, "all", true, class: "peer hidden" %>
              <div class="rounded-lg border p-4 text-center peer-checked:border-sky-600 peer-checked:bg-sky-50">
                <p class="font-medium">Todo</p>
                <p class="text-xs text-gray-500">Toda la base de datos</p>
              </div>
            </label>

            <label class="cursor-pointer">
              <%= radio_button_tag :scope, "filtered", false, class: "peer hidden" %>
              <div class="rounded-lg border p-4 text-center peer-checked:border-sky-600 peer-checked:bg-sky-50">
                <p class="font-medium">Filtrado</p>
                <p class="text-xs text-gray-500">Resultados actuales</p>
              </div>
            </label>
          </div>
        </div>

        <div >
          <p class="text-sm font-semibold text-gray-700 mb-2">Formato</p>
          <div class="grid grid-cols-2 gap-3">
            <label class="cursor-pointer">
              <%= radio_button_tag :export_format, "xlsx", true, class: "peer hidden" %>
              <div class="flex items-center justify-center gap-2 rounded-lg border p-4 peer-checked:border-green-600 peer-checked:bg-green-50">
                <span class="text-green-600 text-xl">ðŸ“Š</span>
                <span class="font-medium">Excel</span>
              </div>
            </label>

            <label class="cursor-pointer">
              <%= radio_button_tag :export_format, "pdf", false, class: "peer hidden" %>
              <div class="flex items-center justify-center gap-2 rounded-lg border p-4 peer-checked:border-red-600 peer-checked:bg-red-50">
                <span class="text-red-600 text-xl">ðŸ“„</span>
                <span class="font-medium">PDF</span>
              </div>
            </label>
          </div>
        </div>
        <!-- Mantener filtros actuales -->
        <% request.query_parameters.each do |key, value| %>
          <%= hidden_field_tag key, value unless %w[scope export_format].include?(key) %>
        <% end %>
        <div class="pt-4">
          <button type="submit" class="w-full bg-green-600 hover:bg-green-700 text-white py-3 rounded-xl font-semibold flex items-center justify-center gap-2">Exportar</button>
        </div>
      <% end %>
    <% end %>
  </div>
<% end %>